---
import { Menu, X } from 'lucide-astro';
---

<header class="fixed top-0 w-full z-50 bg-adikal-black/90 backdrop-blur-sm border-b border-white/10">
  <div class="max-w-5xl mx-auto px-4 py-4 flex justify-between items-center">
    <a href="/" class="text-xl font-bold text-white tracking-tight hover:text-adikal-green transition-colors z-50 relative">
      <span class="text-adikal-green">&gt;</span> Adikal<span class="animate-pulse">_</span>
    </a>
    
    <!-- Desktop Nav -->
    <nav class="hidden md:flex items-center gap-8">
      <a href="#features" class="text-sm text-gray-400 hover:text-white transition-colors">Features</a>
      <a href="#proof-of-concept" class="text-sm text-gray-400 hover:text-white transition-colors">PoC</a>
      <a href="#pricing" class="text-sm text-gray-400 hover:text-white transition-colors">Pricing</a>
      <a href="#contact" class="bg-adikal-green text-black font-bold text-sm py-2 px-6 hover:bg-white transition-colors">
        Get a Demo
      </a>
    </nav>

    <!-- Mobile Nav Toggle -->
    <button id="menu-toggle" class="md:hidden text-white hover:text-adikal-green transition-colors z-50 relative" aria-label="Toggle Menu">
      <span id="menu-icon">
        <Menu size={24} />
      </span>
      <span id="close-icon" class="hidden">
        <X size={24} />
      </span>
    </button>
  </div>
</header>


<!-- Mobile Menu Overlay - Moved outside header to avoid backdrop-filter containing block issues -->
<div id="mobile-menu" class="fixed inset-0 bg-black z-40 flex flex-col items-center justify-center gap-8 opacity-0 pointer-events-none transition-opacity duration-300">
  <a href="#features" class="text-2xl font-bold text-gray-300 hover:text-adikal-green transition-colors mobile-link">Features</a>
  <a href="#proof-of-concept" class="text-2xl font-bold text-gray-300 hover:text-adikal-green transition-colors mobile-link">PoC</a>
  <a href="#pricing" class="text-2xl font-bold text-gray-300 hover:text-adikal-green transition-colors mobile-link">Pricing</a>
  <a href="#contact" class="text-2xl font-bold text-adikal-green mobile-link">Get a Demo</a>
</div>

<script>
  const menuToggle = document.getElementById('menu-toggle');
  const mobileMenu = document.getElementById('mobile-menu');
  const menuIcon = document.getElementById('menu-icon');
  const closeIcon = document.getElementById('close-icon');
  const mobileLinks = document.querySelectorAll('.mobile-link');
  let isMenuOpen = false;

  function toggleMenu() {
    isMenuOpen = !isMenuOpen;
    if (isMenuOpen) {
      mobileMenu?.classList.remove('opacity-0', 'pointer-events-none');
      menuIcon?.classList.add('hidden');
      closeIcon?.classList.remove('hidden');
      document.body.style.overflow = 'hidden';
    } else {
      mobileMenu?.classList.add('opacity-0', 'pointer-events-none');
      menuIcon?.classList.remove('hidden');
      closeIcon?.classList.add('hidden');
      document.body.style.overflow = '';
    }
  }

  menuToggle?.addEventListener('click', toggleMenu);

  mobileLinks.forEach(link => {
    link.addEventListener('click', toggleMenu);
  });
</script>